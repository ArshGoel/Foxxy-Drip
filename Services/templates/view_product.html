{% extends "base.html" %}
{% load static %}
{% block title %}{{ product.name }} - FOXXY DRIP{% endblock title %}
{% block shopactive %}active{% endblock shopactive %}

{% block body %}
{% block extracss %}
<link rel="stylesheet" href="{% static 'css/view_product.css' %}">
{% endblock extracss %}
<div class="container mt-4">
  <div class="row">
      <div class="col-md-6">
          <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded shadow-sm">
      </div>
      <div class="col-md-6">
          <h2>{{ product.name }}</h2>
          <p class="text-muted">{{ product.category }}</p>
          <p>{{ product.description }}</p>
          <p class="fw-bold fs-4">â‚¹{{ product.price }}</p>

          <form action="{% url 'add_to_cart' product.product_id %}" method="POST">
              {% csrf_token %}
              <div class="mb-3">
                  <label for="size" class="form-label">Select Size</label>
                  <select name="size" id="size" class="form-select" required>
                      {% for size_obj in product.productsize_set.all %}
                          {% if size_obj.quantity > 0 %}
                              <option value="{{ size_obj.size }}">{{ size_obj.size }} ({{ size_obj.quantity }} in stock)</option>
                          {% else %}
                              <option value="{{ size_obj.size }}" disabled>{{ size_obj.size }} - Out of Stock</option>
                          {% endif %}
                      {% endfor %}
                  </select>
              </div>
              <div class="mb-3">
                  <label for="quantity" class="form-label">Quantity</label>
                  <input type="number" name="quantity" id="quantity" min="1" value="1" class="form-control" required>
              </div>
              <button type="submit" class="btn btn-success">Add to Cart</button>
          </form>
      </div>
  </div>
</div>
{% endblock body %}