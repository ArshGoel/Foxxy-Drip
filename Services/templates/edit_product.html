{% extends "base.html" %}
{% load static %}
{% block title %}Edit Product - FOXXY DRIP{% endblock title %}

{% block body %}
<h2>Edit Product</h2>

{% if messages %}
  {% for message in messages %}
    <p style="color: green;">{{ message }}</p>
  {% endfor %}
{% endif %}

<form method="POST" enctype="multipart/form-data">
  {% csrf_token %}

  <label>Name:</label><br>
  <input type="text" name="name" value="{{ product.name }}" required><br><br>

  <label>Description:</label><br>
  <textarea name="description" rows="4" required>{{ product.description }}</textarea><br><br>

  <label>Category:</label><br>
  <select name="category" required>
      {% for key, value in product.CATEGORY_CHOICES %}
        <option value="{{ key }}" {% if product.category == key %}selected{% endif %}>
          {{ value }}
        </option>
      {% endfor %}
  </select><br><br>

  <label>Price (₹):</label><br>
  <input type="number" step="0.01" name="price" value="{{ product.price }}" required><br><br>

  <label>Color:</label><br>
  <input type="text" name="color" value="{{ product.color }}" required><br><br>

  <h4>Available Stock (per size):</h4>
  <label>XXS:</label> <input type="number" name="qty_xxs" value="{{ product.qty_xxs }}"><br>
  <label>XS:</label> <input type="number" name="qty_xs" value="{{ product.qty_xs }}"><br>
  <label>S:</label> <input type="number" name="qty_s" value="{{ product.qty_s }}"><br>
  <label>M:</label> <input type="number" name="qty_m" value="{{ product.qty_m }}"><br>
  <label>L:</label> <input type="number" name="qty_l" value="{{ product.qty_l }}"><br>
  <label>XL:</label> <input type="number" name="qty_xl" value="{{ product.qty_xl }}"><br>
  <label>XXL:</label> <input type="number" name="qty_xxl" value="{{ product.qty_xxl }}"><br>
  <label>XXXL:</label> <input type="number" name="qty_xxxl" value="{{ product.qty_xxxl }}"><br><br>

  <label>Product Image:</label><br>
  {% if product.image %}
    <img src="{{ product.image.url }}" alt="Product Image" width="150"><br>
    <small>Upload new to replace</small><br>
  {% endif %}
  <input type="file" name="image" accept="image/*"><br><br>

  <button type="submit">Save Changes</button>
</form>

<br><a href="{% url 'product_list' %}">⬅ Back to Product List</a>
{% endblock body %}
