{% extends "base.html" %}
{% load static %}

{% block title %}All Products - FOXXY DRIP{% endblock title %}

{% block body %}
{% block extracss %}
<style>
    .product {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        display: flex;
        gap: 20px;
        align-items: center;
    }
    .product img {
        width: 120px;
        height: auto;
        border-radius: 6px;
    }
    .details {
        flex: 1;
    }
    .sizes {
        margin-top: 5px;
    }
    .sizes span {
        display: inline-block;
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 3px 8px;
        margin: 2px;
        font-size: 14px;
    }
    .sizes .out {
        background: #f9f9f9;
        color: #aaa;
        text-decoration: line-through;
    }
</style>
{% endblock extracss %}

<h2>All Products</h2>

{% for product in products %}
<div class="product">
    <h3>{{ product.name }} ({{ product.product_id }}) - â‚¹{{ product.price }}</h3>
    <p>Colors & Sizes:</p>
    <ul>
        {% for color in product.colors.all %}
        <li>
            <strong>{{ color.name }}:</strong>
            {% for size_obj in color.sizes.all %}
                {{ size_obj.size }}({{ size_obj.quantity }}){% if not forloop.last %}, {% endif %}
            {% endfor %}
        </li>
        {% endfor %}
    </ul>

    <p>Designs:</p>
    <ul>
        {% for color in product.colors.all %}
            {% for design in color.designs.all %}
                {{ design.name }} 
                {% for img in design.images.all %}
                    <img src="{{ img.image.url }}" width="80">
                {% endfor %}
                <br>
            {% endfor %}
        {% endfor %}
    </ul>

    <a href="{% url 'edit_product' product.product_id %}">Edit</a>
</div>
<hr>
{% empty %}
<p>No products found.</p>
{% endfor %}

<a href="{% url 'upload_product' %}">Upload Another Product</a>
{% endblock body %}
