{% extends "base.html" %}
{% load static %}

{% block title %}{{ design.name }} - FOXXY DRIP{% endblock title %}

{% block body %}
<div class="container mt-5 text-center">

  <!-- Main Design Image -->
  {% if design.images.first %}
    <img src="{{ design.images.first.image.url }}" class="img-fluid rounded shadow" style="max-width:400px;">
  {% else %}
    <img src="https://via.placeholder.com/400x400?text=No+Image" class="img-fluid rounded shadow">
  {% endif %}

  <h2 class="mt-3">{{ design.name }}</h2>

  <!-- Price -->
  {% if design.type %}
    {% if design.type.discount_percent > 0 %}
      <h4>
        <span style="text-decoration: line-through; color:#aaa;">₹{{ design.type.price }}</span>
        &nbsp; ₹{{ design.type.discounted_price }}
        <span class="text-danger">({{ design.type.discount_percent }}% OFF)</span>
      </h4>
    {% else %}
      <h4>₹{{ design.type.price }}</h4>
    {% endif %}
  {% else %}
    <h4 class="text-muted">Price not available</h4>
  {% endif %}

  <!-- Description -->
  <p class="mt-3">{{ design.description }}</p>

  <!-- Add to Cart Form -->
  <form method="post" action="{% url 'add_to_cart' design.id %}">
      {% csrf_token %}
      <select name="size" required>
          {% for size in design.color.sizes.all %}
              <option value="{{ size.size }}">{{ size.get_size_display }}</option>
          {% endfor %}
      </select>

      <input type="number" name="quantity" value="1" min="1">
      <button type="submit">Add to Cart</button>
  </form>

</div>
{% endblock body %}
