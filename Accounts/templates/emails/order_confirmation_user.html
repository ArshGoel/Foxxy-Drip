{% extends "emails/base_email.html" %}
{% load static %}

{% block body %}
<div class="content" style="padding:25px; color:#333; font-family:Arial, sans-serif;">

  <!-- Title -->
  <h2 style="margin:0 0 20px; font-size:20px; color:#232f3e; text-align:center; font-weight:600;">
    ✅ Order Confirmation — #{{ order.id }}
  </h2>

  <!-- Greeting -->
  <p style="font-size:15px; line-height:1.6; margin-bottom:10px;">
    Hi <strong>{{ order.profile.user.first_name|default:order.profile.user.username }}</strong>,
  </p>

  <p style="font-size:15px; line-height:1.6; margin-bottom:20px;">
    Thanks for shopping with <strong>Foxxy Drip</strong>! We’ve received your order and it’s now being processed.
  </p>

  <!-- Order summary card -->
  <div style="border:1px solid #e5e7eb; border-radius:8px; padding:16px; margin-bottom:20px;">
    <p style="margin:0; font-size:14px;">
      <strong>Order ID:</strong> #{{ order.id }}<br>
      <strong>Placed On:</strong> {{ order.created_at|date:"d M Y, H:i" }}<br>
      <strong>Status:</strong> {{ order.get_status_display }}
    </p>
  </div>

  <!-- Delivery Address -->
  <h3 style="font-size:16px; margin:18px 0 8px; color:#232f3e;">Delivery Address</h3>
  <p style="font-size:14px; line-height:1.6; margin:0 0 14px;">
    {{ order.address.receiver_name }} — {{ order.address.phone }}<br>
    {{ order.address.address_line1 }}{% if order.address.address_line2 %}, {{ order.address.address_line2 }}{% endif %}<br>
    {{ order.address.city }}, {{ order.address.state }} — {{ order.address.postal_code }}<br>
    {{ order.address.country }}
  </p>

  <!-- Items -->
  <h3 style="font-size:16px; margin:18px 0 8px; color:#232f3e;">Items</h3>
  <table role="presentation" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse;">
    <thead>
      <tr>
        <th align="left" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Product</th>
        <th align="left" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Design</th>
        <th align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Image</th>
        <th align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Size</th>
        <th align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Qty</th>
        <th align="right" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Price</th>
        <th align="right" style="font-size:13px; padding:8px; border-bottom:1px solid #eee;">Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for it in order.items.all %}
      <tr>
        <td style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          {{ it.product.name }}
        </td>
        <td style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          {% if it.design %}
            {{ it.design.name }}
          {% else %}
            —
          {% endif %}
        </td>
        <td align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          {% if it.design and it.design.images.first %}
            <img src="https://foxxydrip.com{{ it.design.images.first.image.url }}" alt="{{ it.design.name }}" style="height:50px; width:auto;">
          {% else %}
            —
          {% endif %}
        </td>
        <td align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          {{ it.size|default:"—" }}
        </td>
        <td align="center" style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          {{ it.quantity }}
        </td>
        <td align="right" style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          ₹{{ it.price }}
        </td>
        <td align="right" style="font-size:13px; padding:8px; border-bottom:1px solid #f5f5f5;">
          ₹{{ it.total_price }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan="6" align="right" style="padding:10px; font-size:14px;"><strong>Total</strong></td>
        <td align="right" style="padding:10px; font-size:14px;"><strong>₹{{ order.total_price }}</strong></td>
      </tr>
    </tfoot>
  </table>

  <!-- Footer note -->
  <p style="font-size:12px; color:#666; margin-top:22px;">
    You’ll receive another email when your order ships. If you have any questions, reply to this email.
  </p>

  <p style="font-size:14px; line-height:1.6; color:#555; margin-top:25px;">
    Regards,<br>
    <strong>Foxxy Drip Team</strong>
  </p>

</div>
{% endblock body %}
